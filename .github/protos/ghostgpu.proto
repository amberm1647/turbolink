syntax = "proto3";

package ghostgpu;

service GhostGPU {
	rpc CreateSession (SessionInfo) returns (ServerResponse) {}

	rpc JoinSession (SessionInfo) returns (ServerResponse) {}

	rpc SendCapture (DataBuffer) returns (ServerResponse) {}

	rpc GetCapture (DataRequest) returns (DataBuffer) {}

	rpc GetDepth (DataRequest) returns (DataBuffer) {}
}

message SessionInfo {
	string user_id = 1;
	string session_id = 2;
}

message ServerResponse {
	string msg = 1;
}

message DataRequest {
	SessionInfo info = 1;
	int32 chunk_size = 2;
	int32 chunk_index = 3;
}

message DataBuffer {
	SessionInfo info = 1;
	int32 chunk_size = 2;
	int32 chunk_index = 3;
	int32 total_chunks = 4;
	bytes buffer = 5;
}